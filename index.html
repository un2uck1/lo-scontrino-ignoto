<!DOCTYPE html>
<html lang="it">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Lo Scontrino Ignoto</title>
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Courier+Prime:ital,wght@0,400;0,700;1,400&family=Inter:wght@400;600;800&display=swap"
        rel="stylesheet">
    <!-- CSS -->
    <link rel="stylesheet" href="style.css">
    <!-- Tailwind CSS (still using for some utilities if needed, but style.css covers most) -->
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="overflow-hidden select-none">

    <header>
        <button onclick="openInfoModal()" class="absolute left-4 p-2 text-gray-500 hover:text-black">
            <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24">
                <path fill="currentColor"
                    d="M11 18h2v-2h-2v2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4z">
                </path>
            </svg>
        </button>
        <h1>SCONTRINO</h1>
        <button onclick="toggleDarkMode()" class="absolute right-16 p-2 text-gray-500 hover:text-black"
            title="Toggle Dark Mode">
            <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24">
                <path fill="currentColor"
                    d="M9 2c-1.05 0-2.05.16-3 .46 4.06 1.27 7 5.06 7 9.54 0 4.48-2.94 8.27-7 9.54.95.3 1.95.46 3 .46 5.52 0 10-4.48 10-10S14.52 2 9 2z">
                </path>
            </svg>
        </button>
        <button onclick="openStatsModal()" class="absolute right-4 p-2 text-gray-500 hover:text-black">
            <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24">
                <path fill="currentColor" d="M16 6l2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z">
                </path>
            </svg>
        </button>
    </header>

    <div id="game-container">
        <!-- Realistic Receipt -->
        <div id="receipt-preview">
            <!-- Receipt Header -->
            <div class="receipt-header">
                <div class="store-name">SUPERMERCATO</div>
                <div class="store-subtitle">IL MEGLIO DEL GIORNO</div>
                <div class="receipt-divider">‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê</div>
            </div>

            <!-- Receipt Meta -->
            <div class="receipt-meta">
                <div>Scontrino: #<span id="receipt-number">---</span></div>
                <div id="receipt-date">--/--/----</div>
            </div>

            <!-- Items Header -->
            <div class="items-header">
                <span>ARTICOLO</span>
                <span>Q.T√Ä</span>
            </div>
            <div class="receipt-divider-thin">- - - - - - - - - - - - - -</div>

            <!-- Product List -->
            <div id="product-list" class="product-items">
                <!-- JS Injected -->
            </div>

            <div class="receipt-divider-thin">- - - - - - - - - - - - - -</div>

            <!-- Receipt Footer -->
            <div class="receipt-footer">
                <div class="total-label">TOTALE DA INDOVINARE</div>
                <div class="receipt-icon">üßæ</div>
                <button id="hint-btn" class="hint-button hidden" onclick="showHint()">üí° SUGGERIMENTO</button>
                <div id="hint-text" class="hint-text hidden"></div>
                <div class="receipt-thanks">Buona Fortuna!</div>
            </div>
        </div>

        <!-- Wordle Grid -->
        <div id="grid-board">
            <!-- 5 Rows will be generated by JS or static here -->
            <div class="guess-row" id="row-0">
                <div class="tile"></div>
            </div>
            <div class="guess-row" id="row-1">
                <div class="tile"></div>
            </div>
            <div class="guess-row" id="row-2">
                <div class="tile"></div>
            </div>
            <div class="guess-row" id="row-3">
                <div class="tile"></div>
            </div>
            <div class="guess-row" id="row-4">
                <div class="tile"></div>
            </div>
        </div>
    </div>

    <!-- KEYPAD REMOVED -->

    <!-- Modals -->
    <!-- Info Modal -->
    <div id="info-modal" class="modal-overlay hidden">
        <div class="modal-content text-left">
            <button onclick="closeInfoModal()" class="float-right text-xl font-bold">&times;</button>

            <div class="instructions">
                <h1>Scontrino Ignoto</h1>
                <div
                    style="font-size: 0.8rem; text-transform: uppercase; color: #6b7280; font-weight: 700; margin-bottom: 10px;">
                    Arcade Mode</div>
                <hr class="border-gray-300 my-2">

                <p class="mb-2">üõí <strong>Come si gioca:</strong></p>
                <ul class="list-disc pl-5 mb-4 space-y-1">
                    <li>Ti viene mostrata una lista della spesa ma <strong>i prezzi dei singoli articoli sono
                            NASCOSTI!</strong> üôà</li>
                    <li>Il tuo obiettivo √® stimare il <strong>TOTALE</strong> dello scontrino.</li>
                    <li>Hai <strong>5 tentativi</strong> per indovinare.</li>
                </ul>

                <p class="mb-2">üéØ <strong>Vittoria:</strong></p>
                <p class="mb-4">Non serve la precisione assoluta! Vinci il round se indovini con un margine di errore
                    del <strong>5%</strong>.</p>
                <p class="text-xs text-gray-500 mb-4">(Esempio: Se il totale √® ‚Ç¨20.00, vinci tra ‚Ç¨19.00 e ‚Ç¨21.00)</p>

                <div class="examples">
                    <p><strong>Esempi di Risposta</strong></p>

                    <div class="example">
                        <div class="row">
                            <div class="small-tile" data-state="correct">2</div>
                            <div class="small-tile">0</div>
                            <div class="small-tile">.</div>
                            <div class="small-tile">0</div>
                            <div class="small-tile">0</div>
                        </div>
                        <p><strong>Esatto!</strong> (O molto vicino)</p>
                    </div>

                    <div class="example">
                        <div class="row">
                            <div class="small-tile">1</div>
                            <div class="small-tile">5</div>
                            <div class="small-tile" data-state="present">‚¨áÔ∏è</div>
                            <div class="small-tile">0</div>
                            <div class="small-tile">0</div>
                        </div>
                        <p>Il totale reale √® <strong>pi√π basso</strong>.</p>
                    </div>

                    <div class="example">
                        <div class="row">
                            <div class="small-tile">1</div>
                            <div class="small-tile">0</div>
                            <div class="small-tile">.</div>
                            <div class="small-tile" data-state="present">‚¨ÜÔ∏è</div>
                            <div class="small-tile">0</div>
                        </div>
                        <p>Il totale reale √® <strong>pi√π alto</strong>.</p>
                    </div>
                </div>

                <div class="mt-4 p-3 bg-gray-100 rounded text-sm">
                    <p><strong>Obiettivo:</strong> Completa 5 Round con il punteggio pi√π alto possibile!</p>
                </div>

                <div class="text-xs text-gray-500 mt-8 text-center">
                    <p>&copy; 2026 Lo Scontrino Ignoto</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Result/Stats Modal -->
    <div id="result-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <h2 id="result-title" class="text-2xl font-bold mb-2">STATISTICS</h2>

            <div class="grid grid-cols-4 gap-2 mb-6 text-center">
                <div>
                    <div id="stat-played" class="text-2xl font-bold">0</div>
                    <div class="text-[10px]">Giocate</div>
                </div>
                <div>
                    <div id="stat-win" class="text-2xl font-bold">0</div>
                    <div class="text-[10px]">Vittorie %</div>
                </div>
                <div>
                    <div id="stat-streak" class="text-2xl font-bold">0</div>
                    <div class="text-[10px]">Streak</div>
                </div>
                <div>
                    <div id="stat-max" class="text-2xl font-bold">0</div>
                    <div class="text-[10px]">Max</div>
                </div>
            </div>

            <h3 class="text-sm font-bold border-b pb-2 mb-2">PROSSIMO SCONTRINO</h3>
            <div id="next-timer" class="text-2xl font-mono mb-4">DOMANI</div>

            <button onclick="resetGame()" class="w-full bg-black text-white font-bold py-3 uppercase text-sm">
                GIOCA ANCORA
            </button>
        </div>
    </div>

    <!-- Module Entry Point -->
    <script type="module" src="js/main.js"></script>
</body>

</html>